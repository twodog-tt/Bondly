# Bondly å‰ç«¯åº”ç”¨

åŸºäº React + TypeScript + Vite æ„å»ºçš„ç°ä»£åŒ– Web3 åº”ç”¨å‰ç«¯ã€‚

## ğŸ†• æœ€æ–°æ›´æ–° (2024å¹´12æœˆ)

### Interaction Staking Hook é‡æ„ âœ…
- **æ•°æ®è¯»å–ä¸æ“ä½œåˆ†ç¦»**: åˆ›å»º `useInteractionStakingData` ç”¨äºåˆçº¦è¯»å–ï¼Œä¼˜åŒ– `useInteractionStaking` ç”¨äºæ“ä½œ
- **çœŸå®åˆçº¦æ•°æ®**: ä½¿ç”¨ `useReadContract` æ›¿æ¢mockæ•°æ®ï¼Œå®ç°çœŸå®åˆçº¦è°ƒç”¨
- **äº‹ä»¶é©±åŠ¨æ›´æ–°**: æ·»åŠ  `useWatchContractEvent` å®æ—¶åˆçº¦äº‹ä»¶ç›‘å¬
- **æ€§èƒ½ä¼˜åŒ–**: å®ç°memoizationå’Œæ¡ä»¶æŸ¥è¯¢
- **å¢å¼ºé”™è¯¯å¤„ç†**: æ”¹è¿›é”™è¯¯æ¶ˆæ¯å’ŒçŠ¶æ€ç®¡ç†

**å˜æ›´æ–‡ä»¶:**
- `src/hooks/useInteractionStakingData.ts` (æ–°å¢)
- `src/hooks/useInteractionStaking.ts` (é‡æ„)
- `src/components/InteractionStakingSection.tsx` (æ›´æ–°)

**è¯¦ç»†æ–‡æ¡£:** å‚è§ `INTERACTION_STAKING_REFACTOR.md`

## ğŸš€ ç‰¹æ€§

- **ç°ä»£åŒ–æŠ€æœ¯æ ˆ**: React 18 + TypeScript + Vite
- **Web3 é›†æˆ**: Wagmi + Viem + RainbowKit
- **å›½é™…åŒ–æ”¯æŒ**: i18next å¤šè¯­è¨€æ”¯æŒ
- **å“åº”å¼è®¾è®¡**: ç§»åŠ¨ç«¯å’Œæ¡Œé¢ç«¯å®Œç¾é€‚é…
- **ä»£ç è´¨é‡**: ESLint + Prettier + TypeScript ä¸¥æ ¼æ¨¡å¼
- **æ€§èƒ½ä¼˜åŒ–**: ä»£ç åˆ†å‰²ã€æ‡’åŠ è½½ã€æ„å»ºä¼˜åŒ–
- **è´¨æŠ¼ç®¡ç†**: å®Œæ•´çš„è´¨æŠ¼æµåŠ¨æ€§ç®¡ç†ç•Œé¢ï¼Œæ”¯æŒç®¡ç†å‘˜æ·»åŠ å¥–åŠ±

## ğŸ“¦ å®‰è£…ä¾èµ–

```bash
npm install
```

## ğŸ› ï¸ å¼€å‘å‘½ä»¤

```bash
# å¯åŠ¨å¼€å‘æœåŠ¡å™¨
npm run dev

# æ„å»ºç”Ÿäº§ç‰ˆæœ¬
npm run build

# é¢„è§ˆæ„å»ºç»“æœ
npm run preview

# ä»£ç æ£€æŸ¥
npm run lint

# è‡ªåŠ¨ä¿®å¤ä»£ç æ ¼å¼
npm run lint:fix

# TypeScript ç±»å‹æ£€æŸ¥
npm run type-check

# æ ¼å¼åŒ–ä»£ç 
npm run format

# æ£€æŸ¥ä»£ç æ ¼å¼
npm run format:check
```

## ğŸ—ï¸ é¡¹ç›®ç»“æ„

```
src/
â”œâ”€â”€ components/          # å¯å¤ç”¨ç»„ä»¶
â”‚   â”œâ”€â”€ common/         # é€šç”¨ç»„ä»¶
â”‚   â”œâ”€â”€ editor/         # ç¼–è¾‘å™¨ç›¸å…³ç»„ä»¶
â”‚   â””â”€â”€ publish/        # å‘å¸ƒç›¸å…³ç»„ä»¶
â”œâ”€â”€ pages/              # é¡µé¢ç»„ä»¶
â”œâ”€â”€ hooks/              # è‡ªå®šä¹‰ Hooks
â”œâ”€â”€ utils/              # å·¥å…·å‡½æ•°
â”œâ”€â”€ styles/             # æ ·å¼æ–‡ä»¶
â”œâ”€â”€ config/             # é…ç½®æ–‡ä»¶
â”œâ”€â”€ locales/            # å›½é™…åŒ–æ–‡ä»¶
â””â”€â”€ types/              # TypeScript ç±»å‹å®šä¹‰
```

## ğŸ”§ é…ç½®è¯´æ˜

### ç¯å¢ƒå˜é‡

åˆ›å»º `.env.local` æ–‡ä»¶ï¼š

```env
VITE_API_URL=http://localhost:8080
VITE_WAGMI_PROJECT_ID=your_walletconnect_project_id
```

### è·¯å¾„åˆ«å

é¡¹ç›®é…ç½®äº†è·¯å¾„åˆ«åï¼Œæ–¹ä¾¿å¯¼å…¥ï¼š

```typescript
import { Button } from '@components/common/Button';
import { useResponsive } from '@hooks/useResponsive';
import { createRipple } from '@utils/ripple';
```

## ğŸ¨ æ ·å¼ç³»ç»Ÿ

- ä½¿ç”¨ CSS å˜é‡ç®¡ç†ä¸»é¢˜è‰²å½©
- å“åº”å¼è®¾è®¡ï¼Œæ”¯æŒç§»åŠ¨ç«¯å’Œæ¡Œé¢ç«¯
- ç»Ÿä¸€çš„åŠ¨ç”»æ•ˆæœå’Œäº¤äº’åé¦ˆ
- æ¨¡å—åŒ–æ ·å¼ç»„ç»‡

## ğŸ”’ ä»£ç è´¨é‡

- **ESLint**: ä»£ç è§„èŒƒå’Œé”™è¯¯æ£€æŸ¥
- **Prettier**: ä»£ç æ ¼å¼åŒ–
- **TypeScript**: ä¸¥æ ¼ç±»å‹æ£€æŸ¥
- **é”™è¯¯è¾¹ç•Œ**: å…¨å±€é”™è¯¯å¤„ç†

## ğŸ“± å“åº”å¼è®¾è®¡

- ç§»åŠ¨ç«¯ä¼˜å…ˆçš„è®¾è®¡ç†å¿µ
- æ–­ç‚¹ï¼š768px (å¹³æ¿), 1024px (æ¡Œé¢)
- ä½¿ç”¨ `useResponsive` Hook æ£€æµ‹è®¾å¤‡ç±»å‹

## ğŸŒ å›½é™…åŒ–

æ”¯æŒä¸­è‹±æ–‡åˆ‡æ¢ï¼Œæ‰€æœ‰ç”¨æˆ·ç•Œé¢å…ƒç´ éƒ½å·²æœ¬åœ°åŒ–ï¼š

```typescript
import { useTranslation } from 'react-i18next';

const { t } = useTranslation();
const message = t('key');
```

### ç•Œé¢è¯­è¨€

- **è´¨æŠ¼æµåŠ¨æ€§ç®¡ç†**: å®Œå…¨è‹±æ–‡åŒ–ç•Œé¢ï¼ŒåŒ…æ‹¬æƒé™æ£€æŸ¥ã€çŠ¶æ€æ˜¾ç¤ºã€æ“ä½œè¡¨å•ç­‰
- **é”™è¯¯å’ŒæˆåŠŸæ¶ˆæ¯**: æ‰€æœ‰æç¤ºä¿¡æ¯éƒ½å·²æœ¬åœ°åŒ–
- **ç®¡ç†å‘˜åŠŸèƒ½**: ç®¡ç†å‘˜æƒé™éªŒè¯å’Œç®¡ç†æ“ä½œç•Œé¢

## ğŸš€ æ€§èƒ½ä¼˜åŒ–

- **ä»£ç åˆ†å‰²**: æŒ‰è·¯ç”±å’Œç»„ä»¶åˆ†å‰²
- **æ‡’åŠ è½½**: è·¯ç”±å’Œç»„ä»¶æ‡’åŠ è½½
- **æ„å»ºä¼˜åŒ–**: å‹ç¼©ã€Tree Shaking
- **ç¼“å­˜ç­–ç•¥**: é™æ€èµ„æºç¼“å­˜

## ğŸ› è°ƒè¯•

### å‰ç«¯è°ƒè¯•

- å¼€å‘æ¨¡å¼ä¸‹çš„çƒ­é‡è½½
- é”™è¯¯è¾¹ç•Œæ•è· React é”™è¯¯
- æ§åˆ¶å°é”™è¯¯æ—¥å¿—
- ç½‘ç»œè¯·æ±‚ç›‘æ§

### è´¨æŠ¼æµåŠ¨æ€§ç®¡ç†

é¡¹ç›®æä¾›äº†å®Œæ•´çš„è´¨æŠ¼æµåŠ¨æ€§ç®¡ç†åŠŸèƒ½ï¼Œæ”¯æŒç®¡ç†å‘˜é€šè¿‡å‰ç«¯ç•Œé¢æ·»åŠ å¥–åŠ±ï¼š

#### ğŸ” ç®¡ç†å‘˜æƒé™éªŒè¯

- **æƒé™æ£€æŸ¥**: è‡ªåŠ¨éªŒè¯å½“å‰é’±åŒ…åœ°å€æ˜¯å¦å…·æœ‰ `REWARD_MANAGER_ROLE` æƒé™
- **æƒé™çŠ¶æ€æ˜¾ç¤º**: å®æ—¶æ˜¾ç¤ºæƒé™éªŒè¯çŠ¶æ€å’Œå½“å‰åœ°å€
- **æƒé™ä¸è¶³æç¤º**: å‹å¥½çš„æƒé™ä¸è¶³æç¤ºç•Œé¢

#### ğŸ’° è´¨æŠ¼çŠ¶æ€ç›‘æ§

- **å½“å‰APY**: å®æ—¶æ˜¾ç¤ºè´¨æŠ¼å¹´åŒ–æ”¶ç›Šç‡
- **å¥–åŠ±æ± ä½™é¢**: æ˜¾ç¤ºå½“å‰å¥–åŠ±æ± ä¸­çš„ BOND ä»£å¸ä½™é¢
- **æ€»è´¨æŠ¼é‡**: æ˜¾ç¤ºå¹³å°æ€»è´¨æŠ¼é‡
- **å¥–åŠ±ç»“æŸæ—¶é—´**: æ˜¾ç¤ºå½“å‰å¥–åŠ±å‘æ”¾çš„ç»“æŸæ—¶é—´

#### ğŸš€ æµåŠ¨æ€§ç®¡ç†æ“ä½œ

- **å¥–åŠ±é‡‘é¢è®¾ç½®**: è¾“å…¥è¦æ·»åŠ çš„ BOND ä»£å¸æ•°é‡
- **æŒç»­æ—¶é—´è®¾ç½®**: è®¾ç½®å¥–åŠ±å‘æ”¾çš„æŒç»­æ—¶é—´ï¼ˆå¤©æ•°ï¼‰
- **ä½™é¢æ£€æŸ¥**: è‡ªåŠ¨æ£€æŸ¥ç®¡ç†å‘˜è´¦æˆ·çš„å¯ç”¨ä½™é¢
- **ä¸€é”®æ·»åŠ **: è‡ªåŠ¨å¤„ç†æˆæƒå’Œæ·»åŠ å¥–åŠ±çš„å®Œæ•´æµç¨‹

#### ğŸ¨ ç”¨æˆ·ç•Œé¢ç‰¹æ€§

- **å“åº”å¼è®¾è®¡**: å®Œç¾é€‚é…ç§»åŠ¨ç«¯å’Œæ¡Œé¢ç«¯
- **å®æ—¶çŠ¶æ€æ›´æ–°**: æ“ä½œåè‡ªåŠ¨åˆ·æ–°çŠ¶æ€ä¿¡æ¯
- **é”™è¯¯å¤„ç†**: å®Œå–„çš„é”™è¯¯æç¤ºå’Œå¼‚å¸¸å¤„ç†
- **æ“ä½œåé¦ˆ**: æ¸…æ™°çš„æ“ä½œçŠ¶æ€å’Œç»“æœåé¦ˆ

### åˆçº¦è°ƒè¯•è„šæœ¬

é¡¹ç›®æä¾›äº†å¤šä¸ªæœ‰ç”¨çš„è°ƒè¯•è„šæœ¬ï¼Œä½äº `bondly-contracts/scripts/` ç›®å½•ä¸‹ï¼š

#### ğŸ” æƒé™æ£€æŸ¥è„šæœ¬

```bash
# æ£€æŸ¥å½“å‰é’±åŒ…çš„ç®¡ç†å‘˜æƒé™
cd bondly-contracts
npx hardhat run scripts/check-admin-permissions.ts --network sepolia
```

**ä½œç”¨**: æ£€æŸ¥å½“å‰è¿æ¥çš„é’±åŒ…åœ°å€æ˜¯å¦å…·æœ‰è´¨æŠ¼åˆçº¦çš„ç®¡ç†å‘˜æƒé™ï¼ŒåŒ…æ‹¬ï¼š
- `DEFAULT_ADMIN_ROLE`: å®Œå…¨ç®¡ç†å‘˜æƒé™
- `REWARD_MANAGER_ROLE`: å¥–åŠ±ç®¡ç†æƒé™
- `PAUSER_ROLE`: æš‚åœåˆçº¦æƒé™

#### ğŸ’° ä½™é¢æ£€æŸ¥è„šæœ¬

```bash
# æ£€æŸ¥ BOND ä»£å¸ä½™é¢
npx hardhat run scripts/check-balance.ts --network sepolia
```

**ä½œç”¨**: æ£€æŸ¥æŒ‡å®šè´¦æˆ·çš„ BOND ä»£å¸ä½™é¢å’Œ ETH ä½™é¢ï¼Œæä¾›ï¼š
- ä»£å¸åˆçº¦ä¿¡æ¯
- è´¦æˆ·ä½™é¢è¯¦æƒ…
- æ·»åŠ ä»£å¸åˆ°é’±åŒ…çš„æŒ‡å¯¼
- Etherscan é“¾æ¥

#### ğŸš€ æ·»åŠ è´¨æŠ¼æµåŠ¨æ€§è„šæœ¬

```bash
# ä¸ºè´¨æŠ¼åˆçº¦æ·»åŠ å¥–åŠ±æµåŠ¨æ€§
npx hardhat run scripts/add-staking-liquidity.ts --network sepolia
```

**ä½œç”¨**: ä¸ºè´¨æŠ¼åˆçº¦æ·»åŠ  BOND ä»£å¸ä½œä¸ºå¥–åŠ±ï¼ŒåŒ…æ‹¬ï¼š
- è‡ªåŠ¨æˆæƒä»£å¸ä½¿ç”¨
- è®¾ç½®å¥–åŠ±é‡‘é¢å’ŒæŒç»­æ—¶é—´
- è®¡ç®—å’Œæ˜¾ç¤º APY
- éªŒè¯æ“ä½œç»“æœ

#### ğŸ“‹ åˆçº¦éƒ¨ç½²æ£€æŸ¥è„šæœ¬

```bash
# æ£€æŸ¥å·²éƒ¨ç½²çš„åˆçº¦çŠ¶æ€
npx hardhat run scripts/check-deployed-contracts.ts --network sepolia
```

**ä½œç”¨**: æ£€æŸ¥æ‰€æœ‰å·²éƒ¨ç½²åˆçº¦çš„çŠ¶æ€å’Œé…ç½®ï¼ŒåŒ…æ‹¬ï¼š
- åˆçº¦åœ°å€åˆ—è¡¨
- åˆçº¦åŸºæœ¬ä¿¡æ¯
- æƒé™é…ç½®
- ç½‘ç»œè¿æ¥çŠ¶æ€

#### ğŸ—ï¸ éƒ¨ç½²è„šæœ¬

```bash
# éƒ¨ç½²è´¨æŠ¼åˆçº¦
npx hardhat run scripts/deploy-staking-only.ts --network sepolia

# éƒ¨ç½²å®Œæ•´ç³»ç»Ÿ
npx hardhat run scripts/deploy-v2.ts --network sepolia

# ç®€å•éƒ¨ç½²
npx hardhat run scripts/deploy-simple.ts --network sepolia
```

**ä½œç”¨**: ä¸åŒåœºæ™¯ä¸‹çš„åˆçº¦éƒ¨ç½²è„šæœ¬

#### ğŸ¯ ä»£å¸æ“ä½œè„šæœ¬

```bash
# é“¸é€  BOND ä»£å¸
npx hardhat run scripts/mint-v2.ts --network sepolia

# è½¬ç§»ä»£å¸
npx hardhat run scripts/transfer-v2.ts --network sepolia

# é“¸é€ ä»£å¸åˆ°ä¸­ç»§åœ°å€
npx hardhat run scripts/mint-to-relay.ts --network sepolia
```

**ä½œç”¨**: ä»£å¸ç›¸å…³çš„æ“ä½œè„šæœ¬

#### ğŸ› ï¸ å·¥å…·è„šæœ¬

```bash
# æ£€æŸ¥ç¯å¢ƒé…ç½®
node scripts/utils/check-env.js

# ç”Ÿæˆæ–‡æ¡£
node scripts/generate-docs.js

# ç”ŸæˆæŠ¥å‘Š
node scripts/utils/generate-report.js
```

**ä½œç”¨**: 
- `check-env.js`: æ£€æŸ¥ç¯å¢ƒå˜é‡é…ç½®ã€Node.js ç‰ˆæœ¬ã€ä¾èµ–å®‰è£…ç­‰
- `generate-docs.js`: è‡ªåŠ¨ç”Ÿæˆåˆçº¦æ–‡æ¡£
- `generate-report.js`: ç”Ÿæˆéƒ¨ç½²å’Œæµ‹è¯•æŠ¥å‘Š
- `verify.ts`: åˆçº¦éªŒè¯å·¥å…·å‡½æ•°

#### ğŸ›ï¸ æ²»ç†éƒ¨ç½²è„šæœ¬

```bash
# éƒ¨ç½²æ²»ç†åˆçº¦
npx hardhat run scripts/deploy/governance.ts --network sepolia

# å®Œæ•´éƒ¨ç½²
npx hardhat run scripts/deploy/deploy.ts --network sepolia
```

**ä½œç”¨**: æ²»ç†ç³»ç»Ÿç›¸å…³çš„éƒ¨ç½²è„šæœ¬

### è°ƒè¯•è„šæœ¬ä½¿ç”¨æŒ‡å—

1. **ç¯å¢ƒå‡†å¤‡**:
   ```bash
   cd bondly-contracts
   npm install
   cp env.example .env
   # ç¼–è¾‘ .env æ–‡ä»¶ï¼Œå¡«å…¥æ­£ç¡®çš„ç§é’¥å’Œç½‘ç»œé…ç½®
   ```

2. **ç½‘ç»œé…ç½®**:
   - ç¡®ä¿ `hardhat.config.ts` ä¸­é…ç½®äº†æ­£ç¡®çš„ç½‘ç»œ
   - ç¡®ä¿è´¦æˆ·æœ‰è¶³å¤Ÿçš„ ETH æ”¯ä»˜ gas è´¹ç”¨

3. **æƒé™æ£€æŸ¥**:
   - è¿è¡Œæƒé™æ£€æŸ¥è„šæœ¬ç¡®è®¤å½“å‰è´¦æˆ·çš„æƒé™
   - åªæœ‰å…·æœ‰ç›¸åº”æƒé™çš„è´¦æˆ·æ‰èƒ½æ‰§è¡Œç®¡ç†æ“ä½œ

4. **æ“ä½œé¡ºåº**:
   - å…ˆæ£€æŸ¥åˆçº¦çŠ¶æ€å’Œæƒé™
   - ç¡®è®¤ä½™é¢å……è¶³
   - æ‰§è¡Œå…·ä½“æ“ä½œ
   - éªŒè¯æ“ä½œç»“æœ

### å¸¸è§é—®é¢˜æ’æŸ¥

1. **æƒé™ä¸è¶³**:
   ```bash
   npx hardhat run scripts/check-admin-permissions.ts --network sepolia
   ```

2. **ä½™é¢ä¸è¶³**:
   ```bash
   npx hardhat run scripts/check-balance.ts --network sepolia
   ```

3. **åˆçº¦çŠ¶æ€å¼‚å¸¸**:
   ```bash
   npx hardhat run scripts/check-deployed-contracts.ts --network sepolia
   ```

4. **è´¨æŠ¼å¥–åŠ±é—®é¢˜**:
   ```bash
   npx hardhat run scripts/add-staking-liquidity.ts --network sepolia
   ```

## ğŸ“¦ éƒ¨ç½²

### æ„å»º

```bash
npm run build
```

### Docker éƒ¨ç½²

```bash
docker build -t bondly-fe .
docker run -p 80:80 bondly-fe
```

## ğŸ¤ è´¡çŒ®æŒ‡å—

1. Fork é¡¹ç›®
2. åˆ›å»ºåŠŸèƒ½åˆ†æ”¯
3. æäº¤æ›´æ”¹
4. æ¨é€åˆ°åˆ†æ”¯
5. åˆ›å»º Pull Request

## ï¿½ï¿½ è®¸å¯è¯

MIT License
