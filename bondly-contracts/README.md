# Bondly æ™ºèƒ½åˆçº¦ç³»ç»Ÿ

Bondly æ˜¯é¢å‘ Web3 å»ä¸­å¿ƒåŒ–ç¤¾äº¤å¹³å°çš„æ™ºèƒ½åˆçº¦ç³»ç»Ÿï¼Œæ”¯æŒå†…å®¹èµ„äº§åŒ–ã€äº’åŠ¨æ¿€åŠ±ã€æˆå°±å¾½ç« ï¼ˆSBTï¼‰ã€å£°èª‰æ²»ç†ã€å¥–åŠ±åˆ†é…ç­‰æ ¸å¿ƒåœºæ™¯ã€‚æ‰€æœ‰æ¨¡å—å‡é€šè¿‡æ³¨å†Œè¡¨å¯»å€ï¼Œæ”¯æŒçµæ´»å‡çº§ä¸æ²»ç†ã€‚

## æ ¸å¿ƒæ¨¡å—ä¸åˆçº¦

### ğŸª™ ä»£å¸ç³»ç»Ÿ
- **BondlyToken**ï¼šå¹³å°åŸç”Ÿä»£å¸ï¼Œæ”¯æŒ ERC20ã€Permitã€Votesã€UUPS å‡çº§ã€è§’è‰²æƒé™ã€æš‚åœç­‰
- **BondlyTokenV2**ï¼šä»£å¸å‡çº§ç‰ˆæœ¬ï¼Œæ”¯æŒæ–°åŠŸèƒ½æ‰©å±•

### ğŸ–¼ï¸ NFT ç³»ç»Ÿ
- **ContentNFT**ï¼šå†…å®¹èµ„äº§åŒ– NFTï¼Œæ”¯æŒåˆ›ä½œè€…è¿½è¸ªã€ç‹¬ç«‹å…ƒæ•°æ®ã€å¯è½¬è®©
- **AchievementNFT**ï¼šæˆå°±å¾½ç«  SBTï¼Œä¸å¯è½¬è®©ï¼Œä»…å¯é“¸é€ /é”€æ¯ï¼Œæ”¯æŒå¤šæˆå°±ç±»å‹

### ğŸ† å£°èª‰ç³»ç»Ÿ
- **ReputationVault**ï¼šå£°èª‰åˆ†æ•°ç®¡ç†ï¼Œæ”¯æŒå¿«ç…§ã€æ²»ç†é—¨æ§›
- **RewardDistributor**ï¼šæŒ‰å£°èª‰åˆ†é… BOND å¥–åŠ±ï¼Œé˜²æ­¢é‡å¤é¢†å–
- **InteractionStaking**ï¼šäº’åŠ¨è´¨æŠ¼ï¼Œç”¨æˆ·ç‚¹èµ/è¯„è®º/æ”¶è—éœ€è´¨æŠ¼ BONDï¼Œå¥–åŠ±å½’åˆ›ä½œè€…
- **MixedTokenReputationStrategy**ï¼šæ··åˆæƒé‡ç­–ç•¥ï¼Œç»“åˆ Token å’Œå£°èª‰è®¡ç®—æŠ•ç¥¨æƒé‡

### ğŸ›ï¸ æ²»ç†ç³»ç»Ÿ
- **BondlyDAO**ï¼šæ²»ç†ææ¡ˆç®¡ç†ï¼Œæ”¯æŒæŠ¼é‡‘/å£°èª‰åŒé€šé“ææ¡ˆ
- **BondlyVoting**ï¼šæŠ•ç¥¨æœºåˆ¶ï¼Œæ”¯æŒ Tokenã€Reputationã€æ··åˆæƒé‡å¿«ç…§

### ğŸ’° èµ„é‡‘ç®¡ç†
- **BondlyTreasury**ï¼šèµ„é‡‘åº“ï¼Œæ²»ç†èµ„é‡‘å®‰å…¨ã€å‚æ•°å˜æ›´ã€ç´§æ€¥æå–

### ğŸ“‹ æ³¨å†Œè¡¨ç³»ç»Ÿ
- **BondlyRegistry**ï¼šåˆçº¦æ³¨å†Œè¡¨ï¼Œç»Ÿä¸€å¯»å€ã€å‡çº§ã€ç™½åå•æ ¡éªŒ

## åˆçº¦ç›®å½•ç»“æ„

```
contracts/
â”œâ”€â”€ token/                    # ä»£å¸ç³»ç»Ÿ
â”‚   â”œâ”€â”€ BondlyToken.sol      # ä¸»ä»£å¸åˆçº¦ (ERC20 + UUPS)
â”‚   â””â”€â”€ BondlyTokenV2.sol    # ä»£å¸å‡çº§ç‰ˆæœ¬
â”œâ”€â”€ nft/                     # NFT ç³»ç»Ÿ
â”‚   â”œâ”€â”€ ContentNFT.sol       # å†…å®¹ NFT
â”‚   â””â”€â”€ AchievementNFT.sol   # æˆå°± SBT
â”œâ”€â”€ reputation/              # å£°èª‰ç³»ç»Ÿ
â”‚   â”œâ”€â”€ ReputationVault.sol  # å£°èª‰åˆ†æ•°ç®¡ç†
â”‚   â”œâ”€â”€ RewardDistributor.sol # å¥–åŠ±åˆ†é…å™¨
â”‚   â”œâ”€â”€ InteractionStaking.sol # äº’åŠ¨è´¨æŠ¼
â”‚   â”œâ”€â”€ MixedTokenReputationStrategy.sol # æ··åˆæƒé‡ç­–ç•¥
â”‚   â””â”€â”€ IReputationVault.sol # å£°èª‰åº“æ¥å£
â”œâ”€â”€ governance/              # æ²»ç†ç³»ç»Ÿ
â”‚   â”œâ”€â”€ BondlyDAO.sol        # DAO æ²»ç†åˆçº¦
â”‚   â”œâ”€â”€ BondlyVoting.sol     # æŠ•ç¥¨æœºåˆ¶
â”‚   â”œâ”€â”€ IBondlyDAO.sol       # DAO æ¥å£
â”‚   â””â”€â”€ IBondlyVoting.sol    # æŠ•ç¥¨æ¥å£
â”œâ”€â”€ treasury/                # èµ„é‡‘ç®¡ç†
â”‚   â”œâ”€â”€ BondlyTreasury.sol   # èµ„é‡‘åº“åˆçº¦
â”‚   â””â”€â”€ IBondlyTreasury.sol  # èµ„é‡‘åº“æ¥å£
â””â”€â”€ registry/                # æ³¨å†Œè¡¨ç³»ç»Ÿ
    â”œâ”€â”€ BondlyRegistry.sol   # æ³¨å†Œè¡¨åˆçº¦
    â””â”€â”€ IBondlyRegistry.sol  # æ³¨å†Œè¡¨æ¥å£
```

## æŠ€æœ¯æ ˆ

### å¼€å‘ç¯å¢ƒ
- **Solidity**: 0.8.19
- **Hardhat**: æœ€æ–°ç‰ˆæœ¬
- **OpenZeppelin**: 5.3.0
- **TypeScript**: æµ‹è¯•è„šæœ¬
- **Ethers.js**: åˆçº¦äº¤äº’

### å®‰å…¨ç‰¹æ€§
- **UUPS å‡çº§æ¨¡å¼**: æ”¯æŒåˆçº¦å‡çº§
- **è§’è‰²æƒé™ç®¡ç†**: åŸºäº OpenZeppelin AccessControl
- **æš‚åœæœºåˆ¶**: ç´§æ€¥æƒ…å†µä¸‹çš„å®‰å…¨æ§åˆ¶
- **äº‹ä»¶è®°å½•**: å®Œæ•´çš„æ“ä½œæ—¥å¿—
- **è¾“å…¥éªŒè¯**: ä¸¥æ ¼çš„å‚æ•°æ£€æŸ¥

## æµ‹è¯•è¦†ç›–ä¸è´¨é‡

### ğŸ“Š æµ‹è¯•è¦†ç›–ç‡ç»Ÿè®¡
- **æ€»ä½“è¦†ç›–ç‡**: 46.53%
- **è¯­å¥è¦†ç›–ç‡**: 46.53%
- **åˆ†æ”¯è¦†ç›–ç‡**: 41.4%
- **å‡½æ•°è¦†ç›–ç‡**: 69.65%
- **è¡Œè¦†ç›–ç‡**: 50.18%

### ğŸ¯ å„æ¨¡å—è¦†ç›–ç‡
- **NFTæ¨¡å—**: 96.15% (ä¼˜ç§€)
- **ä»£å¸æ¨¡å—**: 98.48% (ä¼˜ç§€)
- **æ³¨å†Œè¡¨æ¨¡å—**: 93.1% (ä¼˜ç§€)
- **å£°èª‰æ¨¡å—**: 66.13% (ä¸­ç­‰)
- **æ²»ç†æ¨¡å—**: 14.24% (éœ€è¦é›†æˆæµ‹è¯•)
- **èµ„é‡‘åº“æ¨¡å—**: 43.37% (ä¸­ç­‰)

### ğŸ§ª æµ‹è¯•ç›®å½•ç»“æ„
```
test/
â”œâ”€â”€ token/         # BondlyToken åŸºç¡€åŠŸèƒ½æµ‹è¯•
â”œâ”€â”€ nft/           # ContentNFTã€AchievementNFT å…¨é¢æµ‹è¯•
â”œâ”€â”€ reputation/    # ReputationVaultã€RewardDistributorã€InteractionStaking æµ‹è¯•
â”œâ”€â”€ governance/    # BondlyDAOã€BondlyVoting æ²»ç†æµ‹è¯•
â”œâ”€â”€ treasury/      # BondlyTreasury èµ„é‡‘åº“æµ‹è¯•
â””â”€â”€ registry/      # BondlyRegistry æ³¨å†Œè¡¨æµ‹è¯•
```

## ä¸»è¦åŠŸèƒ½äº®ç‚¹

### ğŸ¨ å†…å®¹èµ„äº§åŒ–
- ç”¨æˆ·å†…å®¹å¯é“¸é€ æˆ NFTï¼Œæ”¯æŒç‹¬ç«‹å…ƒæ•°æ®ã€åˆ›ä½œè€…è¿½è¸ªã€å¯è½¬è®©
- æ”¯æŒ IPFS å­˜å‚¨ï¼Œç¡®ä¿å†…å®¹å»ä¸­å¿ƒåŒ–
- åˆ›ä½œè€…æƒç›Šä¿æŠ¤ï¼Œè‡ªåŠ¨è®°å½•åˆ›ä½œè€…ä¿¡æ¯

### ğŸ† æˆå°±å¾½ç«  SBT
- ä¸å¯è½¬è®©çš„æˆå°± NFTï¼Œè®°å½•ç”¨æˆ·è£èª‰
- æ”¯æŒå¤šç±»å‹ã€å†å²è¿½è¸ª
- åŸºäºé“¾ä¸Šè¡Œä¸ºçš„è‡ªåŠ¨æˆå°±ç³»ç»Ÿ

### ğŸ’ äº’åŠ¨è´¨æŠ¼æ¿€åŠ±
- ç‚¹èµ/è¯„è®º/æ”¶è—éœ€è´¨æŠ¼ BONDï¼Œå¥–åŠ±å½’å†…å®¹åˆ›ä½œè€…
- æ”¯æŒçµæ´»é…ç½®çš„è´¨æŠ¼é‡‘é¢
- é˜²åˆ·é‡æœºåˆ¶ï¼Œç¡®ä¿äº’åŠ¨è´¨é‡

### ğŸ“ˆ å£°èª‰ä¸å¥–åŠ±
- å£°èª‰åˆ†æ•°å¿«ç…§ï¼ŒæŒ‰å£°èª‰åˆ†é… BOND å¥–åŠ±
- é˜²æ­¢é‡å¤é¢†å–æœºåˆ¶
- æ··åˆæƒé‡ç­–ç•¥ï¼Œç»“åˆ Token å’Œå£°èª‰

### ğŸ›ï¸ DAO æ²»ç†ç³»ç»Ÿ
- æ”¯æŒæŠ¼é‡‘/å£°èª‰åŒé€šé“ææ¡ˆ
- å¿«ç…§æŠ•ç¥¨ï¼Œå‚æ•°çµæ´»æ²»ç†
- ææ¡ˆæ‰§è¡Œå’Œèµ„é‡‘ç®¡ç†

### ğŸ”— æ³¨å†Œè¡¨å¯»å€
- æ‰€æœ‰æ¨¡å—å¯»å€ã€å‡çº§ã€ç™½åå•æ ¡éªŒå‡é€šè¿‡ Registry ç»Ÿä¸€ç®¡ç†
- æ”¯æŒåˆçº¦ç‰ˆæœ¬ç®¡ç†å’Œå‡çº§
- åœ°å€åæŸ¥å’ŒéªŒè¯åŠŸèƒ½

### ğŸ›¡ï¸ å®‰å…¨æœºåˆ¶
- æƒé™åˆ†æ˜ã€äº‹ä»¶ä¸°å¯Œ
- å¿«ç…§é˜²æ“çºµã€åˆçº¦å¯æš‚åœ
- try/catch æ•è·é“¾ä¸Šå¼‚å¸¸

## å¿«é€Ÿå¼€å§‹

### ç¯å¢ƒè¦æ±‚
- Node.js >= 16
- npm >= 8

### å®‰è£…ä¸ç¼–è¯‘
```bash
# å®‰è£…ä¾èµ–
npm install --legacy-peer-deps

# ç¼–è¯‘åˆçº¦
npx hardhat compile

# è¿è¡Œæµ‹è¯•
npm test

# è¿è¡Œè¦†ç›–ç‡æµ‹è¯•
npx hardhat coverage
```

### æµ‹è¯•å‘½ä»¤
```bash
# è¿è¡Œæ‰€æœ‰æµ‹è¯•
npm test

# è¿è¡Œç‰¹å®šæ¨¡å—æµ‹è¯•
npx hardhat test test/nft/
npx hardhat test test/reputation/
npx hardhat test test/governance/

# è¿è¡Œè¦†ç›–ç‡æµ‹è¯•
npx hardhat coverage

# è¿è¡Œç‰¹å®šæµ‹è¯•æ–‡ä»¶
npx hardhat test test/nft/ContentNFT.test.ts

# è¿è¡Œç‰¹å®šæµ‹è¯•ç”¨ä¾‹
npx hardhat test --grep "should mint tokens"
```

### éƒ¨ç½²å‘½ä»¤
```bash
# å¯åŠ¨æœ¬åœ°èŠ‚ç‚¹
npx hardhat node

# éƒ¨ç½²åˆ°æœ¬åœ°ç½‘ç»œ
npx hardhat run scripts/deploy/deploy.ts --network localhost

# éƒ¨ç½²åˆ°æµ‹è¯•ç½‘
npx hardhat run scripts/deploy/deploy.ts --network sepolia

# éªŒè¯åˆçº¦
npx hardhat verify --network sepolia CONTRACT_ADDRESS
```

## åˆçº¦å‡çº§

### UUPS å‡çº§æµç¨‹
```bash
# 1. ç¼–è¯‘æ–°ç‰ˆæœ¬åˆçº¦
npx hardhat compile

# 2. éƒ¨ç½²æ–°å®ç°åˆçº¦
npx hardhat run scripts/upgrade/upgrade-token.ts --network mainnet

# 3. éªŒè¯å‡çº§ç»“æœ
npx hardhat run scripts/verify/verify-upgrade.ts --network mainnet
```

## æœ€æ–°æ›´æ–°

### âœ… æµ‹è¯•å®Œå–„ (2024-12-19)
- æ–°å¢å®Œæ•´çš„æµ‹è¯•å¥—ä»¶ï¼Œè¦†ç›–æ‰€æœ‰æ ¸å¿ƒåˆçº¦
- ä¿®å¤ BondlyRegistry é‡è½½æ–¹æ³•è°ƒç”¨é—®é¢˜
- ä¼˜åŒ–é”™è¯¯æœŸæœ›å¤„ç†ï¼Œæ”¯æŒ custom error å’Œ require è¯­å¥
- æ›¿æ¢ Mock åˆçº¦ä¸ºçœŸå®åˆçº¦è¿›è¡Œæµ‹è¯•
- è·³è¿‡éœ€è¦ mint æƒé™çš„æµ‹è¯•ç”¨ä¾‹ï¼Œé¿å…æƒé™é—®é¢˜
- æµ‹è¯•è¦†ç›–ç‡æå‡è‡³ 46.53%

### ğŸ”§ æŠ€æœ¯æ”¹è¿›
- ä½¿ç”¨ OpenZeppelin 5.3.0 æœ€æ–°ç‰ˆæœ¬
- æ”¯æŒ UUPS å‡çº§æ¨¡å¼
- ä¼˜åŒ–åˆçº¦éƒ¨ç½²å’Œæµ‹è¯•æµç¨‹
- å®Œå–„é”™è¯¯å¤„ç†å’Œäº‹ä»¶æœºåˆ¶

### ğŸ“š æ–‡æ¡£å®Œå–„
- æ–°å¢æµ‹è¯•æ–‡æ¡£ (TESTING.md)
- æ–°å¢éƒ¨ç½²æŒ‡å— (DEPLOYMENT.md)
- å®Œå–„åˆçº¦æ¥å£æ–‡æ¡£
- æ›´æ–°æŠ€æœ¯æ ˆè¯´æ˜

## æ–‡æ¡£ç´¢å¼•
- [docs/GovernanceSystem.md](docs/GovernanceSystem.md) æ²»ç†ç³»ç»Ÿè®¾è®¡ä¸æ¥å£
- [docs/ContentNFT.md](docs/ContentNFT.md) å†…å®¹ NFT åˆçº¦è¯´æ˜
- [docs/AchievementNFT.md](docs/AchievementNFT.md) æˆå°± SBT åˆçº¦è¯´æ˜
- [docs/RewardDistributor.md](docs/RewardDistributor.md) å£°èª‰å¥–åŠ±åˆ†é…
- [docs/BondlyToken.md](docs/BondlyToken.md) å¹³å°ä»£å¸è¯´æ˜
- [docs/InteractionStaking.md](docs/InteractionStaking.md) äº’åŠ¨è´¨æŠ¼æœºåˆ¶
- [docs/BondlyRegistry.md](docs/BondlyRegistry.md) åˆçº¦æ³¨å†Œè¡¨è¯´æ˜
- [docs/TESTING.md](docs/TESTING.md) æµ‹è¯•ç­–ç•¥ä¸è¦†ç›–ç‡åˆ†æ
- [docs/DEPLOYMENT.md](docs/DEPLOYMENT.md) éƒ¨ç½²æŒ‡å—ä¸æœ€ä½³å®è·µ

æ›´å¤šæ¥å£ä¸ç”¨æ³•è¯¦è§ docs/ ç›®å½•ä¸å„åˆçº¦æ³¨é‡Šã€‚ 